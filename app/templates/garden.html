{% extends "layout.html" %}
{% block title %}The Garden - NutriMind{% endblock %}

{% block content %}
<div class="flex-1 flex flex-col p-6 overflow-y-auto hide-scrollbar">

    <header class="flex justify-between items-end mb-8">
        <div>
            <h1 class="text-3xl font-display font-bold text-text-main dark:text-text-bright">The Garden</h1>
            <p class="text-xs font-bold text-primary uppercase tracking-widest mt-1">Twilight Cycle</p>
        </div>
        <div
            class="flex items-center gap-1 bg-surface dark:bg-twilight-surface px-3 py-1.5 rounded-full border border-white/50 dark:border-white/5 shadow-soft">
            <span class="text-xl">ðŸ”¥</span>
            <span class="font-bold text-text-main dark:text-text-bright">12</span>
            <span class="text-xs text-text-muted font-bold ml-1">Days</span>
        </div>
    </header>

    <!-- Weekly Calendar -->
    <div
        class="bg-surface dark:bg-twilight-surface rounded-pod p-5 shadow-soft border border-white/40 dark:border-white/5 mb-8">
        <div class="flex justify-between items-end mb-6">
            <div>
                <h2 class="font-display font-bold text-lg text-text-main dark:text-text-bright">Weekly Bloom</h2>
                <p class="text-sm text-text-muted">Target: <span class="text-primary font-bold">2100 kcal</span></p>
            </div>
            <span class="text-xs font-bold text-neon-green bg-neon-green/10 px-2 py-1 rounded">On Track</span>
        </div>

        <div class="grid grid-cols-7 gap-2">
            <!-- Day Columns -->
            {% for day in days_data %}
            <div class="flex flex-col items-center gap-2 group">
                <!-- Bar (Plant Stem) -->
                <div
                    class="relative w-1.5 h-16 bg-surface-alt dark:bg-white/5 rounded-full flex items-end justify-center overflow-hidden">
                    {% set pct = (day.kcal / (day.target or 2000)) * 100 %}
                    <div class="w-full bg-primary/40 dark:bg-primary transition-all duration-1000 group-hover:bg-neon-green"
                        style="height: {{ pct }}%"></div>
                </div>
                <!-- Label -->
                <span
                    class="text-[10px] font-bold uppercase {{ 'text-primary' if day.is_today else 'text-text-muted' }}">{{
                    day.weekday }}</span>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Growth Tasks -->
    <h3 class="font-display font-bold text-lg text-text-main dark:text-text-bright mb-4">Nurture Seeds</h3>

    <div class="space-y-3">
        <!-- Task 1: Hydration -->
        <div
            class="bg-surface dark:bg-twilight-surface rounded-2xl p-4 flex items-center justify-between shadow-soft border border-white/40 dark:border-white/5 group hover:border-primary/50 transition-all">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 rounded-full bg-blue-500/10 text-blue-500 flex items-center justify-center">
                    <span class="material-symbols-outlined text-xl">water_drop</span>
                </div>
                <div>
                    <h4 class="font-bold text-text-main dark:text-text-bright text-sm">Hydration</h4>
                    <p class="text-xs text-text-muted">6/8 glasses drunk</p>
                </div>
            </div>
            <button
                class="w-8 h-8 rounded-full bg-surface-alt dark:bg-white/5 flex items-center justify-center text-text-muted hover:bg-blue-500 hover:text-white transition-colors">
                <span class="material-symbols-outlined text-sm font-bold">add</span>
            </button>
        </div>

        <!-- Task 2: Protein -->
        <div
            class="bg-surface dark:bg-twilight-surface rounded-2xl p-4 flex items-center justify-between shadow-soft border border-white/40 dark:border-white/5 group hover:border-primary/50 transition-all">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 rounded-full bg-accent-protein/20 text-red-400 flex items-center justify-center">
                    <span class="material-symbols-outlined text-xl">fitness_center</span>
                </div>
                <div>
                    <h4 class="font-bold text-text-main dark:text-text-bright text-sm">Protein Goal</h4>
                    <p class="text-xs text-text-muted">{{ days_data[-1].protein if days_data else 0 }}g / 150g</p>
                </div>
            </div>
            <div class="w-8 h-8 rounded-full bg-green-500/20 text-green-500 flex items-center justify-center">
                {% if (days_data[-1].protein if days_data else 0) >= 150 %}
                <span class="material-symbols-outlined text-sm font-bold">check</span>
                {% else %}
                <span class="text-xs font-bold">...</span>
                {% endif %}
            </div>
        </div>

    </div>

</div>
{% endblock %}